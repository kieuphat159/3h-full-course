{% extends "layout.html" %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/post_page.css' %}">

{% endblock %}

{% block content %}
<section class="post-detail">
    {% if post.banner %}
        <img class="post-banner" src="{{ post.banner.url }}" alt="{{ post.title }}">
    {% endif %}

    <h1 class="post-title">{{ post.title }}</h1>
    <div class="post-meta">
        <span>By {{ post.author.username }}</span> | 
        <span>{{ post.date }}</span>
    </div>

    <div class="post-body">
        {{ post.body|linebreaks }}
    </div>
    
    <div class="post-footer">
        <form class="like-form" action="{% url 'posts:like-post' post.id %}" method="post">
            {% csrf_token %}
            <button type="submit" class="like-btn {% if user in post.likes.all %}liked{% endif %}">
                <span class="heart-icon">
                    {% if user in post.likes.all %}
                        üíö
                    {% else %}
                        ‚ù§Ô∏è
                    {% endif %}
                </span>
                <span class="like-count">{{ post.total_likes }} Like{{ post.total_likes|pluralize }}</span>
            </button>
        </form>
    </div>
</section>
{% endblock %}